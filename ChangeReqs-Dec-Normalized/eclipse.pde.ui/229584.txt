Chris fixing bug introduced weird bugs
attached patch
