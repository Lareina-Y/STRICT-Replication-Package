Resolve variable relative reference general variable resolution method accomodating special fields context namespace interpreter comprise context callstack caller construct Optionally interpret special magic field names interpreter param callstack legitimate special cases resolution involve caller param namespace namespace reference top stack Object resolve This Field Reference resolveThisFieldReference Call Stack CallStack callstack Name Space NameSpace this Name Space thisNameSpace Interpreter interpreter String var Name varName special Fields Visible specialFieldsVisible Util Eval Error UtilEvalError var Name varName equals hack special fields visible operating relative type dissallow references prevent user skipping caller special Fields Visible specialFieldsVisible Util Eval Error UtilEvalError Redundant call type get This getThis work Block Name Space BlockNameSpace method namespace XXX eval ths this Name Space thisNameSpace get This getThis interpreter this Name Space thisNameSpace ths get Name Space getNameSpace Object result ths Name Space NameSpace class Name Space classNameSpace get Class Name Space getClassNameSpace this Name Space thisNameSpace class Name Space classNameSpace is Compound isCompound eval Name evalName result class Name Space classNameSpace get This getThis interpreter result class Name Space classNameSpace get Class Instance getClassInstance result duplication notes enclsing instance superclass instance superclass instance var Name varName equals special Fields Visible specialFieldsVisible Util Eval Error UtilEvalError Redundant call type get Super getSuper Block Name Space BlockNameSpace method ths this Name Space thisNameSpace get Super getSuper interpreter this Name Space thisNameSpace ths get Name Space getNameSpace parent this Name Space thisNameSpace get Parent getParent this Name Space thisNameSpace get Parent getParent is Class isClass ths this Name Space thisNameSpace get Parent getParent get This getThis interpreter ths Object obj var Name varName equals global obj this Name Space thisNameSpace get Global getGlobal interpreter obj special Fields Visible specialFieldsVisible var Name varName equals namespace obj this Name Space thisNameSpace var Name varName equals variables obj this Name Space thisNameSpace get Variable Names getVariableNames var Name varName equals methods obj this Name Space thisNameSpace get Method Names getMethodNames var Name varName equals interpreter last Eval Name lastEvalName equals obj interpreter Util Eval Error UtilEvalError call interpreter literal obj special Fields Visible specialFieldsVisible var Name varName equals caller last Eval Name lastEvalName equals last Eval Name lastEvalName equals caller previous context notes callstack Interpreter Error InterpreterError callstack obj callstack callstack Depth callstackDepth get This getThis interpreter Util Eval Error UtilEvalError call caller literal literal caller early obj obj special Fields Visible specialFieldsVisible var Name varName equals callstack last Eval Name lastEvalName equals previous context notes callstack Interpreter Error InterpreterError callstack obj callstack Util Eval Error UtilEvalError call callstack literal obj obj this Name Space thisNameSpace get Variable getVariable var Name varName obj Interpreter Error InterpreterError field var Name varName obj