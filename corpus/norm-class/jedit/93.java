file bean shell beanshell java scripting distribution documentation updates http beanshell org sun license notice contents file subject sun license version license file compliance license copy license http sun original code bean shell beanshell initial developer original code pat niemeyer portions created pat niemeyer copyright rights reserved gnu license notice alternatively contents file terms gnu lesser general license lgpl provisions lgpl applicable version file terms lgpl version file spl decision deleting provisions replace notice provisions required lgpl delete provisions recipient version file spl lgpl patrick niemeyer pat pat net author learning java reilly associates http pat net pat org gjt jedit bsh classpath java net java util java lang java ioexception java org gjt jedit bsh classpath bsh class path bshclasspath class source classsource org gjt jedit bsh classpath bsh class path bshclasspath jar class source jarclasssource org gjt jedit bsh classpath bsh class path bshclasspath generated class source generatedclasssource org gjt jedit bsh bsh class manager bshclassmanager org gjt jedit bsh class path exception classpathexception debug org gjt jedit bsh interpreter org gjt jedit bsh util eval error utilevalerror pre manage classloading bean shell beanshell classpath extension file reloading holds implementation bsh class manager bshclassmanager separated core relies bsh class loader bshclassloader weak references workaround weak work supplying classloader code http beanshell org manual classloading html details bsh classloader architecture bsh multi tiered loading architecture loader created generated classpath modified reloaded note synchronization note jdk dependency forced weak references accomodate fleeting namespace listeners name spaces namespaces informed space cache names interesting thought implement bean shell beanshell garbage collector senses screw loading require classloading precedence script evaluated scripted script modified classpath optionally external classloader optionally thread context classloader plain for name forname source java file classpath pre suppress warnings suppresswarnings unchecked class manager impl classmanagerimpl bsh class manager bshclassmanager string bsh org gjt jedit bsh classpath base loader initially reset empty instance bsh class path bshclasspath grows paths reset classpath explicitly set called extension path strictly confined path set arbitrarily set class path setclasspath bsh class path bshclasspath base class path baseclasspath super import superimport full blown classpath including base class path baseclasspath extensions user path java bootstrap path jar lazily constructed importantly lazily intialized components mapping full path expensive full path composite base class path baseclasspath user extension user class path userclasspath boot class path bootclasspath order bsh class path bshclasspath full class path fullclasspath class path classpath change listeners vector listeners vector reference queue referencequeue ref queue refqueue reference queue referencequeue handles extension modification base classpath loader mapping reloaded classes exists base loader baseloader initially meaning loader bsh class loader bshclassloader base loader baseloader map classname loaders reloaded classes map loader map loadermap bsh class manager bshclassmanager singleton constructor class manager impl classmanagerimpl reset class for name classforname string check positive cache absolute class cache absoluteclasscache check negative cache absolute non classes absolutenonclasses interpreter debug interpreter debug absolute non class absolutenonclass list hit interpreter debug interpreter debug load check explicitly mapped reloaded class loader classloader overlay loader overlayloader get loader for class getloaderforclass overlay loader overlayloader overlay loader overlayloader load class loadclass exception no class def found error noclassdeffounderror no class def found noclassdeffound explicitly mapped error insure core classes loaded loader starts with startswith bsh interpreter get class loader getclassloader load class loadclass class not found exception classnotfoundexception check classpath extension reloaded classes base loader baseloader base loader baseloader load class loadclass class not found exception classnotfoundexception optionally external classloader external class loader externalclassloader external class loader externalclassloader load class loadclass class not found exception classnotfoundexception turn completely class loader classloader context class loader contextclassloader thread current thread currentthread get context class loader getcontextclassloader context class loader contextclassloader for name forname context class loader contextclassloader class not found exception classnotfoundexception fall fall security exception securityexception plain for name forname plain class for name plainclassforname class not found exception classnotfoundexception scripted load source class loadsourceclass cache result note plain class for name plainclassforname caches redundant process cache class info cacheclassinfo resource url bean shell beanshell classpath param path absolute path url get resource getresource string path url url base loader baseloader classloader leading slash url base loader baseloader get resource getresource path substring url url get resource getresource path url resource stream bean shell beanshell classpath param path absolute path input stream inputstream get resource as stream getresourceasstream string path input stream inputstream base loader baseloader classloader leading slash base loader baseloader get resource as stream getresourceasstream path substring get resource as stream getresourceasstream path class loader classloader get loader for class getloaderforclass string class loader classloader loader map loadermap classpath mutators add class path addclasspath url path ioexception base loader baseloader set class path setclasspath url path opportunity listener classpath base loader baseloader add url addurl path base class path baseclasspath add path class loader changed classloaderchanged clear classloading behavior caches reset initial reset base class path baseclasspath bsh class path bshclasspath base class path baseclasspath base loader baseloader loader map loadermap hash map hashmap calls clear caches clearcaches class loader changed classloaderchanged set base classpath create base classloader types change set class path setclasspath url base class path baseclasspath set path setpath init base loader initbaseloader loader map loadermap hash map hashmap class loader changed classloaderchanged overlay entire path loader set base path user path base path point including boot path reload thos reload all classes reloadallclasses class path exception classpathexception bsh class path bshclasspath bcp bsh class path bshclasspath temp bcp add component addcomponent base class path baseclasspath bcp add component addcomponent bsh class path bshclasspath get user class path getuserclasspath set class path setclasspath bcp get path components getpathcomponents init base loader baseloader base class path baseclasspath init base loader initbaseloader base loader baseloader bsh class loader bshclassloader base class path baseclasspath reloading reloading classes creating classloader asked classes space discrete files class loader discretefilesclassloader reload classes reloadclasses string class names classnames class path exception classpathexception init base loader base loader baseloader init base loader initbaseloader discrete files class loader discretefilesclassloader class source map classsourcemap map discrete files class loader discretefilesclassloader class source map classsourcemap class names classnames length string class names classnames base loader baseloader path class source classsource class source classsource base class path baseclasspath get class source getclasssource user path class source classsource bsh class path bshclasspath get user class path getuserclasspath insure initialized insureinitialized class source classsource bsh class path bshclasspath get user class path getuserclasspath get class source getclasssource class source classsource class path exception classpathexception handle urlclass loader urlclassloader handle jars class source classsource jar class source jarclasssource class path exception classpathexception reload source class source classsource map class source classsource create classloader set classes class loader classloader discrete files class loader discretefilesclassloader map map classes loader overlay map iterator map key set keyset iterator has next hasnext loader map loadermap string class loader changed classloaderchanged reload classes sun tools special unpackaged refer unpackaged classes reload package reloadpackage string pack class path exception classpathexception collection classes base class path baseclasspath get classes for package getclassesforpackage pack classes classes bsh class path bshclasspath get user class path getuserclasspath get classes for package getclassesforpackage pack classes class path exception classpathexception classes pack reload classes reloadclasses string classes to array toarray string unimplemented store map location reload path component reloadpathcomponent url class path exception classpathexception class path exception classpathexception unimplemented reloading full blown classpath bsh class path bshclasspath get class path getclasspath class path exception classpathexception full class path fullclasspath full class path fullclasspath full class path fullclasspath bsh class path bshclasspath bean shell beanshell full path full class path fullclasspath add component addcomponent bsh class path bshclasspath get user class path getuserclasspath full class path fullclasspath add component addcomponent bsh class path bshclasspath get boot class path getbootclasspath class path exception classpathexception system err println warning boot path full class path fullclasspath add component addcomponent base class path baseclasspath full class path fullclasspath support hide details opposed name space namespace do super import dosuperimport util eval error utilevalerror get class path getclasspath insure initialized insureinitialized prime lookup table get class name by unq name getclassnamebyunqname get class path getclasspath set name completion include unq names setnamecompletionincludeunqnames class path exception classpathexception util eval error utilevalerror error importing classpath super import superimport has super import hassuperimport super import superimport class path exception classpathexception detail ambigous string get class name by unq name getclassnamebyunqname string class path exception classpathexception get class path getclasspath get class name by unq name getclassnamebyunqname add listener addlistener listener listeners add element addelement weak reference weakreference ref queue refqueue clean listeners reference deadref deadref ref queue refqueue poll listeners remove element removeelement deadref system err println cleaned weak deadref interpreter debug interpreter debug remove existent weak deadref remove listener removelistener listener error unimplemented class loader classloader get base loader getbaseloader base loader baseloader bean shell beanshell classloader class loader classloader get class loader getclassloader impl notes add bytecode source reload bsh class loader bshclassloader initialized create discrete files class loader discretefilesclassloader bytecode exception class path exception classpathexception thrown reload classes reloadclasses define class defineclass string code base class path baseclasspath set class source setclasssource generated class source generatedclasssource code reload classes reloadclasses string class path exception classpathexception org gjt jedit bsh interpreter error interpretererror define class defineclass class for name classforname clear global cache notify namespaces clear caches listener list implemented weak references namespace existence class loader changed classloaderchanged clear caches bsh class manager bshclassmanager clear caches clearcaches safely remove vector to remove toremove vector enumeration listeners elements has more elements hasmoreelements weak reference weakreference weak reference weakreference next element nextelement listener listener garbage collected to remove toremove add class loader changed classloaderchanged enumeration to remove toremove elements has more elements hasmoreelements listeners remove element removeelement next element nextelement dump print writer printwriter println bsh manager dump println println base loader baseloader base loader baseloader println loader map loadermap loader map loadermap println println base class path baseclasspath base class path baseclasspath