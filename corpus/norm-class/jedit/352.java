file bean shell beanshell java scripting distribution documentation updates http beanshell org sun license notice contents file subject sun license version license file compliance license copy license http sun original code bean shell beanshell initial developer original code pat niemeyer portions created pat niemeyer copyright rights reserved gnu license notice alternatively contents file terms gnu lesser general license lgpl provisions lgpl applicable version file terms lgpl version file spl decision deleting provisions replace notice provisions required lgpl delete provisions recipient version file spl lgpl patrick niemeyer pat pat net author learning java reilly associates http pat net pat org gjt jedit bsh classpath java util java util zip java java net org gjt jedit bsh string util stringutil org gjt jedit bsh class path exception classpathexception java lang weak reference weakreference org gjt jedit bsh name source namesource bsh class path bshclasspath encapsulates knowledge path urls maps classes path include jar zip files base dirs bsh class path bshclasspath composite bsh class paths bshclasspaths components path reflect components methods listener classpath traversal lazily call get classes for package getclassesforpackage get class source getclasssource explicitily insure initialized insureinitialized feedback mapping progress mapping feedback mappingfeedback design notes times traverse component paths produce composite view relating path opportunity visitor pattern suppress warnings suppresswarnings unchecked bsh class path bshclasspath class path listener classpathlistener name source namesource string url path components list path ordered list components bsh class paths bshclasspaths list comp paths comppaths set classes mapped map package map packagemap map source url file dir clas map class source classsource package map packagemap class source classsource maps built maps initialized mapsinitialized unqualified name table unqualifiednametable unq name table unqnametable configurable include name completion includes unq names namecompletionincludesunqnames vector listeners vector bsh class path bshclasspath string reset bsh class path bshclasspath string url urls add urls constructors mutators set path setpath url urls reset add urls add bsh class path bshclasspath component path bcp reflected add component addcomponent bsh class path bshclasspath bcp comp paths comppaths comp paths comppaths array list arraylist comp paths comppaths add bcp bcp add listener addlistener add url urls path add all addall arrays as list aslist urls maps initialized mapsinitialized map urls add url url ioexception path add url maps initialized mapsinitialized map url path components including component paths url get path components getpathcomponents url get full path getfullpath to array toarray url set names including component paths set get classes for package getclassesforpackage string pack insure initialized insureinitialized set set hash set hashset collection collection package map packagemap pack set add all addall comp paths comppaths comp paths comppaths size bsh class path bshclasspath comp paths comppaths get classes for package getclassesforpackage pack set add all addall set source lie component path class source classsource get class source getclasssource string class name classname triggering classpath mapping initialization check explicitly set sources generated classes priority classpath class source classsource class source classsource class source classsource class name classname trigger mapping insure initialized insureinitialized class source classsource class source classsource class name classname comp paths comppaths comp paths comppaths size bsh class path bshclasspath comp paths comppaths get class source getclasssource class name classname explicitly set source generated classes user override version classpath located set class source setclasssource string class name classname class source classsource class source classsource class name classname claspath map initialized component maps random note insure ensure ensure jdk source webster main entry ensure pronunciation shur function transitive verb inflected form ensured ensuring safe guarantee synonyms ensure insure assure secure person ensure insure assure interchangeable contexts making inevitable outcome insure stresses measures assure distinctively implies removal doubt suspense person mind secure implies action guard attack loss insure initialized insureinitialized insure initialized insureinitialized param top path toppath top level classpath component send start class mapping startclassmapping message insure initialized insureinitialized top path toppath inform listeners expensive map top path toppath maps initialized mapsinitialized start class mapping startclassmapping initialize components comp paths comppaths comp paths comppaths size bsh class path bshclasspath comp paths comppaths insure initialized insureinitialized initialize ourself maps initialized mapsinitialized map url path to array toarray url top path toppath maps initialized mapsinitialized end class mapping endclassmapping maps initialized mapsinitialized full path including component paths component paths listed order duplicate path components removed list get full path getfullpath list list array list arraylist comp paths comppaths comp paths comppaths size list bsh class path bshclasspath comp paths comppaths get full path getfullpath care remove dups ordered set collection iterator iterator has next hasnext object list list add list add all addall path list support full unqualified classpath returns string ambiguous name ambiguousname object encapsulating names string get class name by unq name getclassnamebyunqname string class path exception classpathexception insure initialized insureinitialized unqualified name table unqualifiednametable unq name table unqnametable get unqualified name table getunqualifiednametable object obj unq name table unqnametable obj ambiguous name ambiguousname class path exception classpathexception ambigous names ambiguous name ambiguousname obj string obj note unqualified table favor source unqualified name table unqualifiednametable get unqualified name table getunqualifiednametable unq name table unqnametable unq name table unqnametable build unqualified name table buildunqualifiednametable unq name table unqnametable unqualified name table unqualifiednametable build unqualified name table buildunqualifiednametable unqualified name table unqualifiednametable unq name table unqnametable unqualified name table unqualifiednametable add component names comp paths comppaths comp paths comppaths size set bsh class path bshclasspath comp paths comppaths class source classsource key set keyset iterator iterator has next hasnext unq name table unqnametable add string add iterator class source classsource key set keyset iterator has next hasnext unq name table unqnametable add string unq name table unqnametable string get all names getallnames insure initialized insureinitialized list names array list arraylist iterator get packages set getpackagesset iterator has next hasnext string pack string names add all addall remove inner class names removeinnerclassnames get classes for package getclassesforpackage pack name completion includes unq names namecompletionincludesunqnames names add all addall get unqualified name table getunqualifiednametable key set keyset string names to array toarray string call map url url array map url urls urls length map urls ioexception string error constructing classpath urls error while mapping errorwhilemapping map url url ioexception string url get file getfile file file is directory isdirectory class mapping classmapping directory to string tostring map traverse dir for classes traversedirforclasses dir class source dirclasssource is archive file name isarchivefilename class mapping classmapping archive url map search jar for classes searchjarforclasses url jar class source jarclasssource url is class file name isclassfilename map loose class looseclass url string classpath component error while mapping errorwhilemapping map string classes object source classes length system println classes source map class mapclass classes source map class mapclass string class name classname object source add map string split classname splitclassname class name classname string pack string clas set set set package map packagemap pack set set hash set hashset package map packagemap pack set set add class name classname add class source classsource map object obj class source classsource class name classname explicitly set set class source setclasssource obj class source classsource class name classname source clear reset path empty reset path array list arraylist comp paths comppaths clear cached structures clearcachedstructures clear cached reconstructed clear cached structures clearcachedstructures maps initialized mapsinitialized package map packagemap hash map hashmap class source classsource hash map hashmap unq name table unqnametable name space changed namespacechanged class path changed classpathchanged clear cached structures clearcachedstructures notify listeners notifylisteners set name completion include unq names setnamecompletionincludeunqnames name completion includes unq names namecompletionincludesunqnames name completion includes unq names namecompletionincludesunqnames name space changed namespacechanged stuff string traverse dir for classes traversedirforclasses file dir ioexception list list traverse dir for classes aux traversedirforclassesaux dir dir string list to array toarray string list traverse dir for classes aux traversedirforclassesaux file top dir topdir file dir ioexception list list array list arraylist string top top dir topdir get absolute path getabsolutepath file children dir list files listfiles children length file child children child is directory isdirectory list add all addall traverse dir for classes aux traversedirforclassesaux top dir topdir child string child get absolute path getabsolutepath is class file name isclassfilename remove absolute topdir portion path leave starts with startswith top substring top length ioexception problem parsing paths canonicalize class name canonicalizeclassname list add list file entries jar string search jar for classes searchjarforclasses url jar ioexception vector vector input stream inputstream jar open stream openstream zip input stream zipinputstream zin zip input stream zipinputstream zip entry zipentry zin get next entry getnextentry string get name getname is class file name isclassfilename add element addelement canonicalize class name canonicalizeclassname zin close string string size copy into copyinto is class file name isclassfilename string to lower case tolowercase ends with endswith index of indexof is archive file name isarchivefilename string to lower case tolowercase ends with endswith jar ends with endswith zip create proper messy turn remove leading trailing note lots strings faster string canonicalize class name canonicalizeclassname string string classname replace classname classname replace classname starts with startswith classname classname substring classname ends with endswith classname classname substring classname length classname string split classname splitclassname string classname classname canonicalize class name canonicalizeclassname classname classname last index of lastindexof string classn packn classn classname packn unpackaged packn classname substring classn classname substring string packn classn collection remove inner class names removeinnerclassnames collection col list list array list arraylist list add all addall col iterator list iterator has next hasnext string string index of indexof remove list url user class path comp userclasspathcomp url get user class path components getuserclasspathcomponents class path exception classpathexception user class path comp userclasspathcomp user class path comp userclasspathcomp string system get property getproperty java path string paths string util stringutil split file path separator pathseparator url urls url paths length paths length jarclass loader jarclassloader doesn urls file file paths get canonical path getcanonicalpath to uri touri to url tourl ioexception class path exception classpathexception parse path user class path comp userclasspathcomp urls urls list packages set get packages set getpackagesset insure initialized insureinitialized set set hash set hashset set add all addall package map packagemap key set keyset comp paths comppaths comp paths comppaths size set add all addall bsh class path bshclasspath comp paths comppaths package map packagemap key set keyset set add listener addlistener class path listener classpathlistener listeners add element addelement weak reference weakreference remove listener removelistener class path listener classpathlistener listeners remove element removeelement notify listeners notifylisteners enumeration listeners elements has more elements hasmoreelements weak reference weakreference weak reference weakreference next element nextelement class path listener classpathlistener class path listener classpathlistener garbage collected listeners remove element removeelement class path changed classpathchanged bsh class path bshclasspath user class path userclasspath bsh class path bshclasspath initialized user path java path bsh class path bshclasspath get user class path getuserclasspath class path exception classpathexception user class path userclasspath user class path userclasspath bsh class path bshclasspath user path get user class path components getuserclasspathcomponents user class path userclasspath bsh class path bshclasspath boot class path bootclasspath boot path including lib jar bsh class path bshclasspath get boot class path getbootclasspath class path exception classpathexception boot class path bootclasspath string rtjar system get property getproperty java lib jar string rtjar get rtjar path getrtjarpath url url file rtjar to uri touri to url tourl boot class path bootclasspath bsh class path bshclasspath boot path url url malformed urlexception malformedurlexception class path exception classpathexception find boot jar boot class path bootclasspath string get rtjar path getrtjarpath string url string urlstring get resource getresource java lang string to external form toexternalform url string urlstring starts with startswith jar file url string urlstring index of indexof url string urlstring substring jar file length class source classsource object source get code getcode string class name classname jar class source jarclasssource class source classsource jar class source jarclasssource url url source url url get url geturl url source note implement consistency bsh class loader bshclassloader natively load jar urlclass loader urlclassloader get code getcode string class name classname error unimplemented string to string tostring jar source dir class source dirclasssource class source classsource dir class source dirclasssource file dir source dir file get dir getdir file source string to string tostring dir source get code getcode string class name classname read bytes from file readbytesfromfile get dir getdir class name classname read bytes from file readbytesfromfile file base string class name classname string class name classname replace file separator char separatorchar file file file base file file exists bytes file input stream fileinputstream fis file input stream fileinputstream file data input stream datainputstream dis data input stream datainputstream fis bytes file length dis read fully readfully bytes dis close ioexception runtime exception runtimeexception couldn load file file bytes generated class source generatedclasssource class source classsource generated class source generatedclasssource bytecode source bytecode get code getcode string class name classname source main string args exception url urls url args length args length urls file args to uri touri to url tourl bsh class path bshclasspath bcp bsh class path bshclasspath test urls string to string tostring bsh class path bshclasspath to string tostring path path comp paths comppaths comp paths comppaths note unqualified table favor source unqualified name table unqualifiednametable hash map hashmap add string fullname string split classname splitclassname fullname object fullname ambiguous name ambiguousname ambiguous name ambiguousname add fullname string ambiguous name ambiguousname ambiguous name ambiguousname add string add fullname ambiguous name ambiguousname list list array list arraylist add string list add list string list to array toarray string list fire name source listeners namesourcelisteners name space changed namespacechanged name source listeners namesourcelisteners name source listeners namesourcelisteners size name source namesource listener name source listeners namesourcelisteners name source changed namesourcechanged list name source listeners namesourcelisteners name source namesource add listener notified names space add name source listener addnamesourcelistener name source namesource listener listener name source listeners namesourcelisteners name source listeners namesourcelisteners array list arraylist name source listeners namesourcelisteners add listener mapping feedback mappingfeedback mapping feedback listener mappingfeedbacklistener add mapping feedback addmappingfeedback mapping feedback mappingfeedback mapping feedback listener mappingfeedbacklistener runtime exception runtimeexception unimplemented listener mapping feedback listener mappingfeedbacklistener start class mapping startclassmapping mapping feedback listener mappingfeedbacklistener mapping feedback listener mappingfeedbacklistener start class mapping startclassmapping system err println start class path classpath mapping class mapping classmapping string msg mapping feedback listener mappingfeedbacklistener mapping feedback listener mappingfeedbacklistener class mapping classmapping msg system err println mapping msg error while mapping errorwhilemapping string mapping feedback listener mappingfeedbacklistener mapping feedback listener mappingfeedbacklistener error while mapping errorwhilemapping system err println end class mapping endclassmapping mapping feedback listener mappingfeedbacklistener mapping feedback listener mappingfeedbacklistener end class mapping endclassmapping system err println class path classpath mapping mapping feedback mappingfeedback start class mapping startclassmapping provide feedback progress mapping classpath param msg message path component mapped perc integer range indicating percentage class mapping classmapping string msg perc provide feedback progress mapping classpath class mapping classmapping string msg error while mapping errorwhilemapping string msg end class mapping endclassmapping