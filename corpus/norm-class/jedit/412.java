position manager positionmanager java manages positions tab size tabsize indent size indentsize no tabs notabs folding explicit collapse folds collapsefolds copyright slava pestov program free software redistribute modify terms gnu general license published free software foundation version license version program distributed hope warranty implied warranty merchantability fitness purpose gnu general license details received copy gnu general license program write free software foundation temple place suite boston usa org gjt jedit buffer imports javax swing text position java util org gjt util log internal j edit jedit document model positions created explicitly removed implicitly references implicit removal work top referenced bottom referenced internally position implemented separately author slava pestov version j edit jedit pre position manager positionmanager position manager positionmanager constructor position manager positionmanager jedit buffer jeditbuffer buffer buffer buffer create position createposition method explicit removal required unreferencing position create position createposition offset pos bottom half posbottomhalf pos bottom half posbottomhalf offset pos bottom half posbottomhalf existing positions existing positions existing pos top half postophalf existing content inserted contentinserted method content inserted contentinserted offset length positions is empty isempty positions offset inclusive iterator pos bottom half posbottomhalf iter positions tail map tailmap pos bottom half posbottomhalf offset key set keyset iterator iteration iter has next hasnext iter content inserted contentinserted offset length iteration content removed contentremoved method content removed contentremoved offset length positions is empty isempty positions offset inclusive iterator pos bottom half posbottomhalf iter positions tail map tailmap pos bottom half posbottomhalf offset key set keyset iterator iteration iter has next hasnext iter content removed contentremoved offset length iteration iteration members jedit buffer jeditbuffer buffer sorted map sortedmap pos bottom half posbottomhalf pos bottom half posbottomhalf positions tree map treemap pos bottom half posbottomhalf pos bottom half posbottomhalf wrapper real position handling code pos bottom half posbottomhalf code top visible references code pos top half postophalf code garbage collector eats position removed bottom pos top half postophalf position pos bottom half posbottomhalf pos top half postophalf constructor pos top half postophalf pos bottom half posbottomhalf get offset getoffset method get offset getoffset offset finalize method todo finalize deprecated java suppress warnings suppresswarnings deprecation override finalize position manager positionmanager unref bottom visible stays code positions code map pos bottom half posbottomhalf comparable pos bottom half posbottomhalf offset pos bottom half posbottomhalf constructor pos bottom half posbottomhalf offset offset offset method unref method unref positions remove content inserted contentinserted method content inserted contentinserted offset length offset offset array index out of bounds exception arrayindexoutofboundsexception offset length check invariants checkinvariants content removed contentremoved method content removed contentremoved offset length offset offset array index out of bounds exception arrayindexoutofboundsexception offset offset length offset offset offset length check invariants checkinvariants equals method override equals object pos bottom half posbottomhalf pos bottom half posbottomhalf offset offset compare to compareto method compare to compareto pos bottom half posbottomhalf pos bottom half posbottomhalf iteration log log log error consistency failure offset pos bottom half posbottomhalf offset check invariants checkinvariants method check invariants checkinvariants offset offset buffer get length getlength array index out of bounds exception arrayindexoutofboundsexception