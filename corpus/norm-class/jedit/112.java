edit bus editbus java edit bus editbus tab size tabsize indent size indentsize no tabs notabs folding explicit collapse folds collapsefolds copyright slava pestov program free software redistribute modify terms gnu general license published free software foundation version license version program distributed hope warranty implied warranty merchantability fitness purpose gnu general license details received copy gnu general license program write free software foundation temple place suite boston usa org gjt jedit java awt java lang annotation java lang reflect method java lang reflect invocation target exception invocationtargetexception java util java util list org gjt util log org gjt util thread utilities threadutilities j edit jedit global event notification mechanism plugins register edit bus editbus receive messages reflecting application including buffers views edit panes set properties maintained application closing application edit bus editbus maintains list objects requested receive messages message registered components receive turn classes objects subscribe edit bus editbus implement link ebcomponent defines single method link ebcomponent handle message handlemessage ebmessage alternatively j edit jedit pre edit bus editbus components object handlers edit bus editbus messages created annotating methods link ebhandler annotation methods expect single parameter edit bus message desired type message matching type types annotation requests exact type matching annotated method called link ebcomponent handle message handlemessage ebmessage handler exists specific message type handler called plugin core link ebplugin ends code plugin code identification purposes automatically edit bus editbus j edit jedit startup routine dockable window receive notification buffer perform registration calling link add to bus addtobus object initialization convenient place register derived code jcomponent code implementation code jcomponent code method code add notify addnotify code message types j edit jedit link org gjt jedit msg plugins send messages object send message edit bus editbus calling method link send ebmessage plugins concern receiving sending messages org gjt jedit ebcomponent org gjt jedit ebmessage author slava pestov author john gellene api documentation version j edit jedit pre edit bus editbus annotation methods considered edit bus message handlers registering object link add to bus addtobus object methods tagged annotation considered handlers specific edit bus messages method expect single argument object type derived ebmessage inclusive delivering ebmessage bus search invoke handlers matching outgoing message type j edit jedit pre annotation classes extending edit plugin editplugin plugin bus automatically ebplugin works implement ebcomponent j edit jedit pre retention retention policy retentionpolicy runtime target element type elementtype type element type elementtype method ebhandler message match exact type parameter compatible type exact add to bus addtobus method adds component bus receive messages bus param comp component add add to bus addtobus ebcomponent comp add to bus addtobus object comp add to bus addtobus method adds component bus methods annotated link ebhandler annotation component edit bus editbus message handlers message matching type bus component link ebcomponent link ebcomponent handle message handlemessage ebmessage method called message bus param comp component add j edit jedit pre add to bus addtobus object comp components add component addcomponent comp remove from bus removefrombus method removes component bus param comp component remove remove from bus removefrombus ebcomponent comp remove from bus removefrombus object comp remove from bus removefrombus method removes component bus param comp component remove pre remove from bus removefrombus object comp components remove component removecomponent comp send method sends message components bus turn message delivered components awt thread method wait handlers receive message returning method link thread utilities threadutilities run in dispatch thread now runindispatchthreadnow read notes deadlocks note calling thread awt thread thread interrupted call method method completion handlers interruption set caller detect interruption call completion handlers call awt thread calling thread interrupted don care completion handlers recommended link send async sendasync ebmessage param message message send ebmessage message runnable sender send message sendmessage message event queue eventqueue is dispatch thread isdispatchthread sender thread utilities threadutilities run in dispatch thread now runindispatchthreadnow sender send async sendasync method schedules message edit bus awt thread processing current events method returns message param message message j edit jedit pre send async sendasync ebmessage message event queue eventqueue invoke later invokelater send message sendmessage message members handler list handlerlist components handler list handlerlist create instances edit bus editbus dispatch method dispatch ebmessage handler ebmessagehandler emh ebmessage msg exception emh handler emh comp emh handler invoke emh comp msg emh comp ebcomponent ebcomponent emh comp handle message handlemessage msg send impl sendimpl method send impl sendimpl ebmessage message is exact isexact type message get class getclass type equals object list ebmessage handler ebmessagehandler handlers components type handlers ebmessage handler ebmessagehandler emh handlers is exact isexact emh source emh source exact debug timer start system nano time nanotime dispatch emh message time system nano time nanotime start time log log log debug edit bus editbus emh comp time dispatch emh message invocation target exception invocationtargetexception log log log error edit bus editbus exception sending message edit bus editbus log log log error edit bus editbus get cause getcause throwable log log log error edit bus editbus exception sending message edit bus editbus log log log error edit bus editbus type type get superclass getsuperclass is exact isexact ebmessage handler ebmessagehandler ebmessage handler ebmessagehandler ebmessage handler ebmessagehandler object comp method handler ebhandler source comp comp handler handler source source object comp method handler ebhandler source special hash map optimizations edit bus editbus notably setting read mode modifications map postponed map unlocked handler list handlerlist hash map hashmap list ebmessage handler ebmessagehandler list ebmessage handler ebmessagehandler safe get safeget type list ebmessage handler ebmessagehandler lst type lst lst linked list linkedlist ebmessage handler ebmessagehandler type lst lst lock lock unlock lock lock object comp add add component addcomponent comp object comp remove remove component removecomponent comp add clear remove clear remove component removecomponent object comp lock remove add comp map entry list ebmessage handler ebmessagehandler entry entry set entryset msg entry get key getkey list ebmessage handler ebmessagehandler handlers entry get value getvalue handlers iterator ebmessage handler ebmessagehandler handlers iterator has next hasnext ebmessage handler ebmessagehandler emh emh comp comp remove add component addcomponent object comp lock add add comp method comp get class getclass get methods getmethods ebhandler source get annotation getannotation ebhandler source params get parameter types getparametertypes params length log log log error edit bus editbus invalid ebhandler method get name getname comp get class getclass get name getname parameters ebmessage is assignable from isassignablefrom params log log log error edit bus editbus invalid parameter params get name getname method get name getname comp get class getclass get name getname components safe get safeget params add ebmessage handler ebmessagehandler comp source component ebcomponent add handler compatibility comp ebcomponent safe get safeget ebmessage add ebmessage handler ebmessagehandler comp lock list object add linked list linkedlist object list object remove linked list linkedlist object send message sendmessage send message sendmessage runnable send message sendmessage ebmessage message message message log log log debug edit bus editbus message to string tostring components lock send impl sendimpl message components unlock ebmessage message