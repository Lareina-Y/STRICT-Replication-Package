file bean shell beanshell java scripting distribution documentation updates http beanshell org sun license notice contents file subject sun license version license file compliance license copy license http sun original code bean shell beanshell initial developer original code pat niemeyer portions created pat niemeyer copyright rights reserved gnu license notice alternatively contents file terms gnu lesser general license lgpl provisions lgpl applicable version file terms lgpl version file spl decision deleting provisions replace notice provisions required lgpl delete provisions recipient version file spl lgpl patrick niemeyer pat pat net author learning java reilly associates http pat net pat org gjt jedit bsh java lang reflect java util vector note messy method field resolution rewritten methods no such method nosuchmethod no such field nosuchfield exceptions searches rewritten avoid exceptions method lookups cached high level logic messy suppress warnings suppresswarnings unchecked reflect invoke method arbitrary object instance invocation object instance dynamic object bsh scripted object bsh type result method call object invoke object method invokeobjectmethod object object string method name methodname object args interpreter interpreter call stack callstack callstack simple node simplenode caller info callerinfo reflect error reflecterror eval error evalerror invocation target exception invocationtargetexception bsh scripted object object is exposed this method isexposedthismethod method name methodname object invoke method invokemethod method name methodname args interpreter callstack caller info callerinfo delcared only delcaredonly plain java object find java method bsh class manager bshclassmanager bcm interpreter interpreter get class manager getclassmanager clas object get class getclass method method resolve expected java method resolveexpectedjavamethod bcm clas object method name methodname args invoke method invokemethod method object args util eval error utilevalerror to eval error toevalerror caller info callerinfo callstack invoke method object instance needed possibility method bsh scripted method object invoke static method invokestaticmethod bsh class manager bshclassmanager bcm clas string method name methodname object args reflect error reflecterror util eval error utilevalerror invocation target exception invocationtargetexception interpreter debug invoke method method method resolve expected java method resolveexpectedjavamethod bcm clas method name methodname args invoke method invokemethod method args invoke java method object performing needed type mappings arguments values param args object invoke method invokemethod method method object object object args reflect error reflecterror invocation target exception invocationtargetexception args args object log invoke method loginvokemethod invoking method entry method args map types assignable forms fast object tmp args tmpargs object args length types method get parameter types getparametertypes args length tmp args tmpargs types cast object castobject rhs args lhs type lhstype types types assignment util eval error utilevalerror interpreter error interpretererror illegal argument type method invocation unwrap primitives tmp args tmpargs primitive unwrap tmp args tmpargs log invoke method loginvokemethod invoking method massaging values method tmp args tmpargs object return value returnvalue method invoke object tmp args tmpargs return value returnvalue return value returnvalue primitive return type returntype method get return type getreturntype primitive wrap return value returnvalue return type returntype illegal access exception illegalaccessexception reflect error reflecterror access method string util stringutil method string methodstring method get name getname method get parameter types getparametertypes method get declaring class getdeclaringclass object get index getindex object array reflect error reflecterror util target error utiltargeterror interpreter debug interpreter debug get index getindex array object val array array primitive wrap val array get class getclass get component type getcomponenttype array index out of bounds exception arrayindexoutofboundsexception util target error utiltargeterror exception reflect error reflecterror array access set index setindex object array object val reflect error reflecterror util target error utiltargeterror val primitive unwrap val array set array val array store exception arraystoreexception util target error utiltargeterror illegal argument exception illegalargumentexception util target error utiltargeterror array store exception arraystoreexception to string tostring exception reflect error reflecterror array access object get static field value getstaticfieldvalue clas string field name fieldname util eval error utilevalerror reflect error reflecterror get field value getfieldvalue clas field name fieldname object get object field value getobjectfieldvalue object object string field name fieldname util eval error utilevalerror reflect error reflecterror object object namespace get variable getvariable field name fieldname get field value getfieldvalue object get class getclass object onlystatic field name fieldname reflect error reflecterror has object property getter hasobjectpropertygetter object get class getclass field name fieldname get object property getobjectproperty object field name fieldname lhs get lhsstatic field getlhsstaticfield clas string field name fieldname util eval error utilevalerror reflect error reflecterror field resolve expected java field resolveexpectedjavafield clas field name fieldname onlystatic lhs lhs reference object field method deals field style property access field exist check property setter lhs get lhsobject field getlhsobjectfield object object string field name fieldname util eval error utilevalerror reflect error reflecterror object guess pass argument setting locally recurse lhs object namespace field name fieldname recurse field resolve expected java field resolveexpectedjavafield object get class getclass field name fieldname static only staticonly lhs object reflect error reflecterror has object property setter hasobjectpropertysetter object get class getclass field name fieldname lhs object field name fieldname object get field value getfieldvalue clas object object string field name fieldname static only staticonly util eval error utilevalerror reflect error reflecterror field resolve expected java field resolveexpectedjavafield clas field name fieldname static only staticonly object object return type returntype get type gettype primitive wrap return type returntype null pointer exception nullpointerexception shouldn happen reflect error reflecterror field name fieldname field illegal access exception illegalaccessexception reflect error reflecterror access field field name fieldname note method resolve expected java field resolveexpectedjavafield rewritten invert logic exceptions caught unecessarily temporary impl field field resolve java field resolvejavafield clas string field name fieldname static only staticonly util eval error utilevalerror resolve expected java field resolveexpectedjavafield clas field name fieldname static only staticonly reflect error reflecterror reflect error reflecterror field note no such field exception nosuchfieldexception change signatures code field resolve expected java field resolveexpectedjavafield clas string field name fieldname static only staticonly util eval error utilevalerror reflect error reflecterror field field capabilities have accessibility haveaccessibility field find accessible field findaccessiblefield clas field name fieldname get field getfield finds interfaces field clas get field getfield field name fieldname no such field exception nosuchfieldexception reflect error reflecterror field field name fieldname security exception securityexception util target error utiltargeterror security exception searching fields clas static only staticonly modifier is static isstatic field get modifiers getmodifiers util eval error utilevalerror reach instance field field name fieldname context clas get name getname field accessibility capability locate occurrance field derived superclass set accessibility flag note method needed simple accessible don hunt fields note classes declare overlapping fields distinction derived java doesn kind access won variables real syntax scope field no such field exception nosuchfieldexception no such field exception nosuchfieldexception field method rewritten get fields getfields avoid catching exceptions search field find accessible field findaccessiblefield clas string field name fieldname util eval error utilevalerror no such field exception nosuchfieldexception field field quick check catches fields include interfaces field clas get field getfield field name fieldname reflect manager reflectmanager rmset accessible rmsetaccessible field field no such field exception nosuchfieldexception hunt clas field clas get declared field getdeclaredfield field name fieldname reflect manager reflectmanager rmset accessible rmsetaccessible field field fall no such field exception nosuchfieldexception clas clas get superclass getsuperclass no such field exception nosuchfieldexception field name fieldname method wraps resolve java method resolvejavamethod expects method result method descriptive reflect error reflecterror method resolve expected java method resolveexpectedjavamethod bsh class manager bshclassmanager bcm clas object object string object args static only staticonly reflect error reflecterror util eval error utilevalerror object primitive util target error utiltargeterror null pointer exception nullpointerexception attempt invoke method types types get types gettypes args method method resolve java method resolvejavamethod bcm clas types static only staticonly method reflect error reflecterror static only staticonly method method string util stringutil method string methodstring types clas get name getname method full blown resolver method method invocation methods delegate method dynamic static only staticonly set object static only staticonly set methods located method performs caching caches discovered methods manager utilizes cached methods method determines attempt methods based capabilities have accessibility haveaccessibility set accessibilty flag method directed find method method locates specific matching instance method descriptive exception analogous error java compiler produce note problem work param static only staticonly method located object param method matching method method resolve java method resolvejavamethod bsh class manager bshclassmanager bcm clas string types static only staticonly util eval error utilevalerror clas interpreter error interpretererror lookup cached method method method bcm interpreter debug resolve java method resolvejavamethod unoptimized lookup method bcm get resolved method getresolvedmethod clas types static only staticonly method public only publiconly capabilities have accessibility haveaccessibility searching method priviledged action method find overloaded method findoverloadedmethod clas types public only publiconly security exception securityexception util target error utiltargeterror security exception searching methods clas check found static method checkfoundstaticmethod method static only staticonly clas method public only publiconly reflect manager reflectmanager rmset accessible rmsetaccessible method util eval error utilevalerror ignore succeeded cache resolved method method bcm bcm cache resolved method cacheresolvedmethod clas types method method candidate methods searching graph base class baseclass resolve specific method method find overloaded method findoverloadedmethod base class baseclass string method name methodname types public only publiconly interpreter debug interpreter debug searching method string util stringutil method string methodstring method name methodname types base class baseclass get name getname method methods get candidate methods getcandidatemethods base class baseclass method name methodname types length public only publiconly interpreter debug interpreter debug specific method method name methodname method method find most specific method findmostspecificmethod types methods method climb inheritence graph type collect methods matching criterion public only publiconly methods classes interfaces returned normal accessible addresses problem arises derives type method delegates gather methods recursive gathermethodsrecursive gather methods recursive gathermethodsrecursive string java util vector method get candidate methods getcandidatemethods base class baseclass string method name methodname num args numargs public only publiconly vector candidates gather methods recursive gathermethodsrecursive base class baseclass method name methodname num args numargs public only publiconly candidates methods array method method candidates size candidates copy into copyinto accumulate methods optionally including methods inheritence tree base class baseclass method analogous get methods getmethods returns methods inheritence tree normal accessible addresses problem arises derives type find methods find method parent candidate methods vector vector gather methods recursive gathermethodsrecursive base class baseclass string method name methodname num args numargs public only publiconly vector candidates candidates candidates vector addresses secure environments public only publiconly is public ispublic base class baseclass add candidates addcandidates base class baseclass get methods getmethods method name methodname num args numargs public only publiconly candidates add candidates addcandidates base class baseclass get declared methods getdeclaredmethods method name methodname num args numargs public only publiconly candidates implement interfaces intfs base class baseclass get interfaces getinterfaces intfs length gather methods recursive gathermethodsrecursive intfs method name methodname num args numargs public only publiconly candidates superclass interfaces don superclass base class baseclass get superclass getsuperclass superclass gather methods recursive gathermethodsrecursive superclass method name methodname num args numargs public only publiconly candidates candidates vector add candidates addcandidates method methods string method name methodname num args numargs public only publiconly vector candidates methods length method methods get name getname equals method name methodname get parameter types getparametertypes length num args numargs public only publiconly is public ispublic candidates add candidates primary object constructor method simpler resolve general method invocation constructors inherited method determines attempt constructors based capabilities have accessibility haveaccessibility set accessibilty flag method object construct object constructobject clas object args reflect error reflecterror invocation target exception invocationtargetexception clas is interface isinterface reflect error reflecterror create instance clas object obj types types get types gettypes args constructor con find constructor inherited constructors worry constructor constructors capabilities have accessibility haveaccessibility clas get declared constructors getdeclaredconstructors clas get constructors getconstructors interpreter debug interpreter debug specific constructor clas con find most specific constructor findmostspecificconstructor types constructors con cant find constructor cantfindconstructor clas types is public ispublic con reflect manager reflectmanager rmset accessible rmsetaccessible con util eval error utilevalerror ignore args primitive unwrap args obj con new instance newinstance args instantiation exception instantiationexception reflect error reflecterror clas illegal access exception illegalaccessexception reflect error reflecterror don permission create instance set accessibility setaccessibility enable access illegal argument exception illegalargumentexception reflect error reflecterror number arguments wrong obj reflect error reflecterror couldn construct object obj method parallel find most specific method findmostspecificmethod reason combined method constructor don common signatures constructor find most specific constructor findmostspecificconstructor ideal match idealmatch constructor constructors match find most specific constructor index findmostspecificconstructorindex ideal match idealmatch constructors match constructors match find most specific constructor index findmostspecificconstructorindex ideal match idealmatch constructor constructors candidates constructors length candidates length candidates constructors get parameter types getparametertypes find most specific signature findmostspecificsignature ideal match idealmatch candidates find match signature ideal match idealmatch assumed methods array holds valid candidates method number args matched method account java covariant types require find derived type identical matches find most specific signature findmostspecificsignature param methods set candidate method differ types arguments method find most specific method findmostspecificmethod ideal match idealmatch method methods copy signatures array find most specific method findmostspecificmethod candidate sigs candidatesigs methods length methods length candidate sigs candidatesigs methods get parameter types getparametertypes match find most specific signature findmostspecificsignature ideal match idealmatch candidate sigs candidatesigs match methods match implement jls specific arguments match match method methods constructors don share common signature info specific candidate note methods equally specific allowed java compiler bean shell beanshell chooses finds add test adding is signature assignable issignatureassignable direction target match assignment works ways specific ambiguous leave test test impact performance method selection cached high level friendly extraneous tests shouldn problem find most specific signature findmostspecificsignature ideal match idealmatch candidates types assignable types assignable best match bestmatch best match index bestmatchindex candidates length target match targetmatch candidates match types is signature assignable issignatureassignable ideal match idealmatch target match targetmatch best match bestmatch types is signature assignable issignatureassignable target match targetmatch best match bestmatch types java base assignable best match bestmatch target match targetmatch best match index bestmatchindex best match bestmatch best match index bestmatchindex string accessor name accessorname string getorset string prop name propname getorset string value of valueof character to upper case touppercase prop name propname char at charat prop name propname substring has object property getter hasobjectpropertygetter clas string prop name propname string getter name gettername accessor name accessorname prop name propname clas get method getmethod getter name gettername no such method exception nosuchmethodexception fall getter name gettername accessor name accessorname prop name propname method clas get method getmethod getter name gettername get return type getreturntype type no such method exception nosuchmethodexception has object property setter hasobjectpropertysetter clas string prop name propname string setter name settername accessor name accessorname set prop name propname method methods clas get methods getmethods setter methods length methods get name getname equals setter name settername object get object property getobjectproperty object obj string prop name propname util eval error utilevalerror reflect error reflecterror object args object interpreter debug property access method method exception string accessor name accessorname accessor name accessorname prop name propname method resolve expected java method resolveexpectedjavamethod bcm obj get class getclass obj accessor name accessorname args exception method string accessor name accessorname accessor name accessorname prop name propname method resolve expected java method resolveexpectedjavamethod bcm obj get class getclass obj accessor name accessorname args method get return type getreturntype type method exception method reflect error reflecterror error property getter invoke method invokemethod method obj args invocation target exception invocationtargetexception util eval error utilevalerror property accessor threw exception get target exception gettargetexception set object property setobjectproperty object obj string prop name propname object reflect error reflecterror util eval error utilevalerror string accessor name accessorname accessor name accessorname set prop name propname object args object interpreter debug property access method method resolve expected java method resolveexpectedjavamethod bcm obj get class getclass obj accessor name accessorname args invoke method invokemethod method obj args invocation target exception invocationtargetexception util eval error utilevalerror property accessor threw exception get target exception gettargetexception human readable version type array types returned postfix dimensions integer array returned get name getname string normalize class name normalizeclassname type type is array isarray type get name getname string builder stringbuilder class name classname string builder stringbuilder class name classname append get array base type getarraybasetype type get name getname get array dimensions getarraydimensions type class name classname append reflect error reflecterror class name classname to string tostring returns dimensionality returns array get array dimensions getarraydimensions array class arrayclass array class arrayclass is array isarray cute array class arrayclass get name getname last index of lastindexof returns base type array reflect error reflecterror array get array base type getarraybasetype array class arrayclass reflect error reflecterror array class arrayclass is array isarray reflect error reflecterror array array class arrayclass get component type getcomponenttype command implemented compiled java invoke methods correct signature invoke methods accept additional leading arguments interpreter callstack invoke interpreter callstack method adds arguments invokes method returning result object invoke compiled command invokecompiledcommand command class commandclass object args interpreter interpreter call stack callstack callstack util eval error utilevalerror add interpereter namespace args list object invoke args invokeargs object args length invoke args invokeargs interpreter invoke args invokeargs callstack system arraycopy args invoke args invokeargs args length bsh class manager bshclassmanager bcm interpreter get class manager getclassmanager reflect invoke static method invokestaticmethod bcm command class commandclass invoke invoke args invokeargs invocation target exception invocationtargetexception util eval error utilevalerror error compiled command get target exception gettargetexception reflect error reflecterror util eval error utilevalerror error invoking compiled command log invoke method loginvokemethod string msg method method object args interpreter debug interpreter debug msg method args args length interpreter debug args args type args get class getclass check found static method checkfoundstaticmethod method method static only staticonly clas util eval error utilevalerror method instance method method static only staticonly is static isstatic method util eval error utilevalerror reach instance method string util stringutil method string methodstring method get name getname method get parameter types getparametertypes context clas get name getname reflect error reflecterror cant find constructor cantfindconstructor clas types types length reflect error reflecterror find constructor clas reflect error reflecterror find constructor string util stringutil method string methodstring clas get name getname types clas get name getname is public ispublic modifier is public ispublic get modifiers getmodifiers is public ispublic method modifier is public ispublic get modifiers getmodifiers is public ispublic constructor modifier is public ispublic get modifiers getmodifiers is static isstatic method modifier is static isstatic get modifiers getmodifiers