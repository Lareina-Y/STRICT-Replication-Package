authored timothy gerard endres mailto time gjt org http trustice work domain work purpose software warranty kind implied warranty merchantability author software assumes responsibility consequence modification redistribution software installer java tar buffer tarbuffer object rcdsize blksize rcdsize input stream inputstream in stream instream output stream outputstream out stream outstream block buffer blockbuffer curr blk idx currblkidx curr rec idx currrecidx block size blocksize record size recordsize recs per block recsperblock debug tar buffer tarbuffer input stream inputstream in stream instream in stream instream tar buffer tarbuffer blksize tar buffer tarbuffer input stream inputstream in stream instream block size blocksize in stream instream block size blocksize tar buffer tarbuffer rcdsize tar buffer tarbuffer input stream inputstream in stream instream block size blocksize record size recordsize in stream instream in stream instream out stream outstream initialize block size blocksize record size recordsize tar buffer tarbuffer output stream outputstream out stream outstream out stream outstream tar buffer tarbuffer blksize tar buffer tarbuffer output stream outputstream out stream outstream block size blocksize out stream outstream block size blocksize tar buffer tarbuffer rcdsize tar buffer tarbuffer output stream outputstream out stream outstream block size blocksize record size recordsize in stream instream out stream outstream out stream outstream initialize block size blocksize record size recordsize initialization common constructors initialize block size blocksize record size recordsize debug block size blocksize block size blocksize record size recordsize record size recordsize recs per block recsperblock block size blocksize record size recordsize block buffer blockbuffer block size blocksize in stream instream curr blk idx currblkidx curr rec idx currrecidx recs per block recsperblock curr blk idx currblkidx curr rec idx currrecidx tar buffer block size blocks consist multiple records get block size getblocksize block size blocksize tar buffer record size get record size getrecordsize record size recordsize set debugging flag buffer param debug print debugging output set debug setdebug debug debug debug determine archive record archive archive record consists bytes param record record data check is eofrecord iseofrecord record get record size getrecordsize record skip record input stream skip record skiprecord ioexception debug system err println skip record skiprecord rec idx recidx curr rec idx currrecidx blk idx blkidx curr blk idx currblkidx in stream instream ioexception reading skip output buffer curr rec idx currrecidx recs per block recsperblock read block readblock undone curr rec idx currrecidx read record input stream data record data read record readrecord ioexception debug system err println read record readrecord rec idx recidx curr rec idx currrecidx blk idx blkidx curr blk idx currblkidx in stream instream ioexception reading output buffer curr rec idx currrecidx recs per block recsperblock read block readblock result record size recordsize system arraycopy block buffer blockbuffer curr rec idx currrecidx record size recordsize result record size recordsize curr rec idx currrecidx result file read block readblock ioexception debug system err println read block readblock blk idx blkidx curr blk idx currblkidx in stream instream ioexception reading output buffer curr rec idx currrecidx offset bytes needed bytesneeded block size blocksize bytes needed bytesneeded num bytes numbytes in stream instream read block buffer blockbuffer offset bytes needed bytesneeded num bytes numbytes offset num bytes numbytes bytes needed bytesneeded num bytes numbytes num bytes numbytes block size blocksize debug system err println read block readblock incomplete read num bytes numbytes block size blocksize bytes read curr blk idx currblkidx current block number based current based block number get current block num getcurrentblocknum curr blk idx currblkidx current record number current block based current offset current block num currentblocknum recs per blk recsperblk current rec num currentrecnum current based record number get current record num getcurrentrecordnum curr rec idx currrecidx write archive record archive param record record data write archive write record writerecord record ioexception debug system err println write record writerecord rec idx recidx curr rec idx currrecidx blk idx blkidx curr blk idx currblkidx out stream outstream ioexception writing input buffer record length record size recordsize ioexception record write length record length record size record size recordsize curr rec idx currrecidx recs per block recsperblock write block writeblock system arraycopy record block buffer blockbuffer curr rec idx currrecidx record size recordsize record size recordsize curr rec idx currrecidx write archive record archive record larger array buffer buffer offset record size param buf buffer record data write param offset offset record data buf write record writerecord buf offset ioexception debug system err println write record writerecord rec idx recidx curr rec idx currrecidx blk idx blkidx curr blk idx currblkidx out stream outstream ioexception writing input buffer offset record size recordsize buf length ioexception record length buf length offset offset record size record size recordsize curr rec idx currrecidx recs per block recsperblock write block writeblock system arraycopy buf offset block buffer blockbuffer curr rec idx currrecidx record size recordsize record size recordsize curr rec idx currrecidx write tar buffer tarbuffer block archive write block writeblock ioexception debug system err println write block writeblock blk idx blkidx curr blk idx currblkidx out stream outstream ioexception writing input buffer out stream outstream write block buffer blockbuffer block size blocksize out stream outstream flush curr rec idx currrecidx curr blk idx currblkidx flush current data block data flush block flushblock ioexception debug system err println tar buffer tarbuffer flush block flushblock called out stream outstream ioexception writing input buffer curr rec idx currrecidx write block writeblock close tar buffer tarbuffer output buffer flush current block closing close ioexception debug system err println tar buffer tarbuffer close buffer closebuffer out stream outstream flush block flushblock out stream outstream system out stream outstream system err out stream outstream close out stream outstream in stream instream in stream instream system in stream instream close in stream instream