authored timothy gerard endres mailto time gjt org http trustice work domain work purpose software warranty kind implied warranty merchantability author software assumes responsibility consequence modification redistribution software installer java tar input stream tarinputstream filter input stream filterinputstream debug has hit eof hashiteof entry size entrysize entry offset entryoffset one buf onebuf read buf readbuf tar buffer tarbuffer buffer tar entry tarentry curr entry currentry entry factory entryfactory e factory efactory tar input stream tarinputstream input stream inputstream tar buffer tarbuffer blksize tar buffer tarbuffer rcdsize tar input stream tarinputstream input stream inputstream block size blocksize block size blocksize tar buffer tarbuffer rcdsize tar input stream tarinputstream input stream inputstream block size blocksize record size recordsize buffer tar buffer tarbuffer block size blocksize record size recordsize read buf readbuf one buf onebuf debug has hit eof hashiteof e factory efactory sets debugging flag param debug f debugf turn debugging set debug setdebug debug f debugf debug debug f debugf sets debugging flag param debug f debugf turn debugging set entry factory setentryfactory entry factory entryfactory factory e factory efactory factory sets debugging flag stream tar buffer tarbuffer param debug f debugf turn debugging set buffer debug setbufferdebug debug buffer set debug setdebug debug closes stream calls tar buffer tarbuffer close method close ioexception buffer close record size stream tar buffer tarbuffer tar buffer tarbuffer record size get record size getrecordsize buffer get record size getrecordsize data read current entry archive data left entire archive current entry determined entry size header field amount data read current entry number bytes current entry ioexception entry size entrysize entry offset entryoffset skip bytes input buffer skips bytes current entry data entire archive current entry data number skip point param num to skip numtoskip number bytes skip skip num to skip numtoskip ioexception review horribly inefficient ensures properly skip bytes tar buffer tarbuffer skip buf skipbuf num num to skip numtoskip num num read numread read skip buf skipbuf num skip buf skipbuf length skip buf skipbuf length num num read numread num num read numread support marking mark supported marksupported support marking param mark limit marklimit limit mark mark mark limit marklimit support marking reset entry tar archive skip remaining data current entry place input stream header entry read header instantiate tar entry tarentry header bytes entry entries archive returned archive reached tar entry tarentry archive tar entry tarentry get next entry getnextentry ioexception has hit eof hashiteof curr entry currentry num to skip numtoskip entry size entrysize entry offset entryoffset debug system err println tar input stream tarinputstream skip curr entry currentry curr entry currentry get name getname entry size entrysize entry offset entryoffset skipping num to skip numtoskip bytes num to skip numtoskip skip num to skip numtoskip read buf readbuf header buf headerbuf buffer read record readrecord header buf headerbuf debug system err println read record has hit eof hashiteof buffer is eofrecord iseofrecord header buf headerbuf debug system err println read eof record has hit eof hashiteof has hit eof hashiteof curr entry currentry e factory efactory curr entry currentry tar entry tarentry header buf headerbuf curr entry currentry e factory efactory create entry createentry header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf invalid header exception invalidheaderexception header magic ustar header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf dec header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf header buf headerbuf debug system err println tar input stream tarinputstream set currentry curr entry currentry get name getname size curr entry currentry get size getsize entry offset entryoffset review resolve discrepancy entry size entrysize curr entry currentry get size getsize invalid header exception invalidheaderexception entry size entrysize entry offset entryoffset curr entry currentry invalid header exception invalidheaderexception bad header block buffer get current block num getcurrentblocknum record buffer get current record num getcurrentrecordnum get message getmessage curr entry currentry reads current tar archive entry method simply calls read read eof read ioexception num read one buf onebuf num num one buf onebuf reads bytes current tar archive entry method simply calls read param buf buffer place bytes read number bytes read eof read buf ioexception read buf buf length reads bytes current tar archive entry method aware boundaries current entry archive deal stream start eof param buf buffer place bytes read param offset offset place bytes read param num to read numtoread number bytes read number bytes read eof read buf offset num to read numtoread ioexception total read totalread entry offset entryoffset entry size entrysize num to read numtoread entry offset entryoffset entry size entrysize num to read numtoread entry size entrysize entry offset entryoffset read buf readbuf num to read numtoread read buf readbuf length read buf readbuf length num to read numtoread system arraycopy read buf readbuf buf offset read buf readbuf length read buf readbuf new len newlen read buf readbuf length new buf newbuf new len newlen system arraycopy read buf readbuf new buf newbuf new len newlen read buf readbuf new buf newbuf total read totalread num to read numtoread offset num to read numtoread rec buffer read record readrecord rec unexpected eof ioexception unexpected eof num to read numtoread bytes unread num to read numtoread rec len reclen rec length rec len reclen system arraycopy rec buf offset read buf readbuf rec len reclen system arraycopy rec read buf readbuf rec len reclen rec len reclen system arraycopy rec buf offset rec len reclen total read totalread num to read numtoread offset entry offset entryoffset total read totalread total read totalread copies contents current tar archive entry output stream param output stream outputstream write entry data copy entry contents copyentrycontents output stream outputstream ioexception buf num read numread read buf buf length num read numread write buf num read numread entry factory entryfactory tar entry tarentry create entry createentry string tar entry tarentry create entry createentry file path invalid header exception invalidheaderexception tar entry tarentry create entry createentry header buf headerbuf invalid header exception invalidheaderexception entry adapter entryadapter entry factory entryfactory tar entry tarentry create entry createentry string tar entry tarentry tar entry tarentry create entry createentry file path invalid header exception invalidheaderexception tar entry tarentry path tar entry tarentry create entry createentry header buf headerbuf invalid header exception invalidheaderexception tar entry tarentry header buf headerbuf