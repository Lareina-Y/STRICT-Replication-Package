40212 – NullPointerException in getLogger when called from ShutdownHook
Hi,
i have a problem with log4j-1.2.13.jar when invoking Logger.getLogger(string)
from a shutdown hook.
I have verified that the the string-parameter is not null.
java.lang.NullPointerException
at org.apache.log4j.LogManager.getLogger(LogManager.java:188)
at org.apache.log4j.Logger.getLogger(Logger.java:104)
at de.his.log.LogManager.getLogger(LogManager.java:122)
at de.his.log.LogManager.getLogger(LogManager.java:81)
at de.his.utils.SecureProperties.<clinit>(SecureProperties.java:72)
at sun.misc.Unsafe.ensureClassInitialized(Native Method)
at
sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)
at
sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)
at java.lang.reflect.Field.acquireFieldAccessor(Field.java:917)
at java.lang.reflect.Field.getFieldAccessor(Field.java:898)
at java.lang.reflect.Field.get(Field.java:357)
at
org.apache.catalina.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1605)
at
org.apache.catalina.loader.WebappClassLoader.stop(WebappClassLoader.java:1489)
at org.apache.catalina.loader.WebappLoader.stop(WebappLoader.java:706)
at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4360)
at
org.apache.catalina.core.ContainerBase.removeChild(ContainerBase.java:892)
at org.apache.catalina.startup.HostConfig.undeployApps(HostConfig.java:1159)
at org.apache.catalina.startup.HostConfig.stop(HostConfig.java:1131)
at
org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:312)
at
org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1053)
at org.apache.catalina.core.ContainerBase.stop(ContainerBase.java:1065)
at org.apache.catalina.core.StandardEngine.stop(StandardEngine.java:447)
at org.apache.catalina.core.StandardService.stop(StandardService.java:512)
at org.apache.catalina.core.StandardServer.stop(StandardServer.java:734)
at org.apache.catalina.startup.Catalina.stop(Catalina.java:601)
at
org.apache.catalina.startup.Catalina$CatalinaShutdownHook.run(Catalina.java:644)
Hendrik